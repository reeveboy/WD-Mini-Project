const shop = [
  {
    id: 1,
    img: "https://ii2.pepperfry.com/media/catalog/product/b/e/494x544/beige-cane-spiral-ornamental-planter-by-trellis-bliss-beige-cane-spiral-ornamental-planter-by-trelli-0btpag.jpg",
    name: "Beige Cane Spiral Ornamental Planter",
    price: 838,
    stock: "In Stock",
    category: "vases",
    description:
      "Fill your space with personality. An unusual design and texture makes our Spiral planter totally unique This planter is made from natural cane. Cane spirals are layered to form this planter. Comes with a removable jute liner making planting and maintenance easy and tidy. It also helps the garden soil in preventing the water from dripping. Accent your orchids and small indoor plants like Succulents, Rubber Plants & Peace Lilies in this beautifully crafted planter giving it an earthy look to your indoor plants It is a all-natural-planter All the materials are compostable Recommended to use indoors only. Avoid over watering. Only water when the soil is completely dry",
  },
  {
    id: 2,
    img: "https://ii2.pepperfry.com/media/catalog/product/g/r/494x544/grass-tray-in-yellow-by-rista-grass-tray-in-yellow-by-rista-trvgut.jpg",
    name: "Black Cane Tray Set of 3",
    price: 3728,
    stock: "In Stock",
    category: "kitchen",
    description:
      "Bring a smile on the face of your guests by serving them snacks and other refreshments in the beautifully designed serving trays. Made of superior quality material, these trays are durable making them great for both, special occasions as well as regular use. Pick a design that will enhance your serving experience. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 3,
    img: "https://ii3.pepperfry.com/media/catalog/product/b/e/494x544/beige-cane-single-hanging-light-by-zilver-beige-cane-single-hanging-light-by-zilver-fqm7np.jpg",
    name: "Canciana Beige Assam Cane Single Hanging Light Set of 2",
    price: 1240,
    stock: "In Stock",
    category: "lights",
    description:
      "Bring back a charming vintage wicker look to your home for cozy or pulsating indoor gatherings with your friends and family. Our lamp shades are crafted to fit into any space of your home. Perfectly caning weaves for an intricate and exquisite design, made of premium quality selected cane, which is super dried and treated for termite for sturdiness and longevity. This lamp shade provides both cozy or pulsating style with outstanding durability to your interior space. Finished with a gorgeous touch of varnish, these lampshades will uplift the blissful look of your home for years to come.",
  },
  {
    id: 4,
    img: "https://ii2.pepperfry.com/media/catalog/product/n/a/494x544/natural-bamboo-wall-light-by-new-era-natural-bamboo-wall-light-by-new-era-yebxig.jpg",
    name: "Natural Bamboo Wall Light",
    price: 985,
    stock: "In Stock",
    category: "lights",
    description:
      "Reduce the centric focus and draw attention to the rest of the room by installing these Upward wall-mounted lights. Space saving and eye captivating, these lights provides an alluring and soothing brightness giving away an elegant and charming appeal to your home decor. Not only are these lights classy to look at, but also high on efficiency. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds",
  },
  {
    id: 5,
    img: "https://ii2.pepperfry.com/media/catalog/product/p/e/494x544/pearl-gold-floral-abstract--by-the-shining-rays-pearl-gold-floral-abstract--by-the-shining-rays-63fvib.jpg",
    name: "Iron Decorative Flower Wall Art In Grey",
    price: 4729,
    stock: "In Stock",
    category: "wall deco",
    description:
      "Add a vibe of creativity and class to your interior to enrich its ambience by installing these amazingly designed Metal Art. This astoundingly designed Metal Art is not only durable or unique looking, but it also beautifies your walls with artistic make & intricate detailing, while creating a unique vibe. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 6,
    img: "https://ii2.pepperfry.com/media/catalog/product/b/u/494x544/butterfly-queen-with-led-by-the-shining-rays-butterfly-queen-with-led-by-the-shining-rays-hpgk9m.jpg",
    name: "Iron Framed Butterfly Queen Wall Art With LED In Gold",
    price: 2648,
    stock: "In Stock",
    category: "wall deco",
    description:
      "Add a vibe of creativity and class to your interior to enrich its ambience by installing these amazingly designed Metal Art. This astoundingly designed Metal Art is not only durable or unique looking, but it also beautifies your walls with artistic make & intricate detailing, while creating a unique vibe. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 7,
    img: "https://ii2.pepperfry.com/media/catalog/product/b/r/494x544/brown-metal-analog-wall-clock-brown-metal-analog-wall-clock-z9eqrk.jpg",
    name: "Brown Metal Analog Wall Clock",
    price: 1699,
    stock: "In Stock",
    category: "clocks",
    description: "TrenDec Metal Wall Decor Clock 18 inch Gold Finish",
  },
  {
    id: 8,
    img: "https://ii1.pepperfry.com/media/catalog/product/m/e/494x544/metal-sparrow-art-wall-clock-by-craft-tree-metal-sparrow-art-wall-clock-by-craft-tree-tc4rpt.jpg",
    name: "Metal Sparrow Art Wall Clock",
    price: 2389,
    stock: "In Stock",
    category: "clocks",
    description:
      "Add oodles of class to your room's wall by picking from our creative range of wall hangings. Beautify your walls with the artistic make, intricate detailing, variety of colours and designs these hangings provide. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 9,
    img: "https://ii3.pepperfry.com/media/catalog/product/m/e/494x544/metal-antique-gold-and-copper-figurines-by-malik-design-metal-antique-gold-and-copper-figurines-by-m-6quxna.jpg",
    name: "Metal Cycle Pen Holder In Copper Table Decor",
    price: 289,
    stock: "In Stock",
    category: "desk deco",
    description:
      "Add oodles of class to your room's wall by picking from our creative range of wall hangings. Beautify your walls with the artistic make, intricate detailing, variety of colours and designs these hangings provide. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 10,
    img: "https://ii3.pepperfry.com/media/catalog/product/m/e/494x544/metal-elephant-key-holder-by-padmavati-art-creations-metal-elephant-key-holder-by-padmavati-art-crea-hq49wm.jpg",
    name: "Metal Elephant Key Holder",
    price: 708,
    stock: "In Stock",
    category: "wall deco",
    description:
      "Experience style with a perfect blend of utility, by using these products from Pepperfry. Here you will find a fleet of options in terms of designs, colours, dimensions, and textures that will keep you coming back for more. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 11,
    img: "https://ii1.pepperfry.com/media/catalog/product/s/i/494x544/silver-iron-butterfly-mirror-wall-hanging-by-malik-design-silver-iron-butterfly-mirror-wall-hanging--hevieg.jpg",
    name: "Metal Round Wall Mirror in Multi colour",
    price: 2780,
    stock: "In Stock",
    category: "wall deco",
    description:
      "Add oodles of class to your room's wall by picking from our creative range of wall hangings. Beautify your walls with the artistic make, intricate detailing, variety of colours and designs these hangings provide. A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 12,
    img: "https://ii3.pepperfry.com/media/catalog/product/i/r/494x544/iron-and-wood--bicycle-by-exim-d-cor-iron-and-wood--bicycle-by-exim-d-cor-rzy8sh.jpg",
    name: "Iron and Wood Bicycle",
    price: 559,
    stock: "In Stock",
    category: "desk deco",
    description:
      "A one stop-shop for home decor and furniture, Pepperfry sells a home product every 30 seconds.",
  },
  {
    id: 13,
    img: "https://ii2.pepperfry.com/media/catalog/product/c/e/494x544/ceramic-fish-table-lamp-in-sea-green-by--home-ceramic-fish-table-lamp-in-sea-green-by--home-htcg6j.jpg",
    name: "Ceramic Fish Table Lamp in Sea Green",
    price: 899,
    stock: "In Stock",
    category: "lights",
  },
  {
    id: 14,
    img: "https://ii2.pepperfry.com/media/catalog/product/s/t/494x544/stunning-underwater-toughened-glass-wall-painting-by-flair-glass-stunning-underwater-toughened-glass-2b7puo.jpg",
    name: "Stunning Underwater Toughened Glass Wall Painting Flair Glass",
    price: 2119,
    stock: "In Stock",
    category: "paintings",
  },
  {
    id: 15,
    img: "https://ii2.pepperfry.com/media/catalog/product/m/u/494x544/multicolour-resin-exotic-indoor-water-fountain-by-the-white-ink-decor-multicolour-resin-exotic-indoo-0ohchi.jpg",
    name: "Multicolour Resin Exotic Indoor Water Fountain",
    price: 3050,
    stock: "In Stock",
    category: "desk deco",
  },
  {
    id: 16,
    img: "https://ii1.pepperfry.com/media/catalog/product/a/l/494x544/aloha--ceramic--set-of-1--vase-by-crok-chok-aloha--ceramic--set-of-1--vase-by-crok-chok-zgz8hp.jpg",
    name: "Aloha Ceramic (Set of 1) Vase",
    price: 339,
    stock: "In Stock",
    category: "vases",
  },
  {
    id: 17,
    img: "https://ii1.pepperfry.com/media/catalog/product/m/a/494x544/matt-white-ceramic-love-bite-large-planter-with-wooden-stand-by-harla-arts-matt-white-ceramic-love-b-o96a8l.jpg",
    name: "Matt White Ceramic Love Bite Large Planter With Wooden Stand",
    price: 2329,
    stock: "In Stock",
    category: "vases",
  },
  {
    id: 18,
    img: "https://ii2.pepperfry.com/media/catalog/product/m/a/494x544/matt-ivory-ceramic-pheonix-medium-planter-by-harla-arts-matt-ivory-ceramic-pheonix-medium-planter-by-s0hiow.jpg",
    name: "Matt Ivory Ceramic Pheonix Medium Planter",
    price: 1699,
    stock: "In Stock",
    category: "vases",
  },
  {
    id: 19,
    img: "https://ii3.pepperfry.com/media/catalog/product/m/u/494x544/multicolor-ceramic-nacre-mother-of-pearl-decorative-plate-showpiece-by-kolorobia-multicolor-ceramic--ql8gy9.jpg",
    name: "Multicolor Ceramic Nacre Mother Of Pearl Decorative Plate Showpiece",
    price: 1099,
    stock: "In Stock",
    category: "desk deco",
  },
  {
    id: 20,
    img: "https://ii2.pepperfry.com/media/catalog/product/m/u/494x544/multicolour-turish-delight-decorative-wall-plate-by-quirk-india-multicolour-turish-delight-decorativ-5vzrji.jpg",
    name: "Multicolour Turish Delight Decorative Wall Plate",
    price: 738,
    stock: "In Stock",
    category: "wall deco",
  },
];

const itemsDiv = document.getElementById("items");

const sortElement = document.getElementById("sort");
let sort = sortElement.selectedOptions[0].value;

const noResults = document.getElementById("number-results");

const filters = document.getElementsByClassName("filter");
let filterIndex = 1;

let newShop = shop;

const priceBtn = document.getElementById("price-btn");

let items = "";

for (let i = 1; i <= filters.length; i++) {
  const ele = document.getElementById(`option${i}`);
  ele.onclick = () => {
    changeFilter(filterIndex, i);

    if (ele.innerText.toLowerCase().startsWith("all")) {
      newShop = shop;
    } else {
      newShop = shop.filter((item) => {
        if (item.category === ele.innerText.toLowerCase()) {
          return item;
        }
      });
    }

    showItems();
  };
}

function changeFilter(oldIndex, newIndex) {
  document.getElementById(`option${oldIndex}`).style = "font-weight: 400;";
  document.getElementById(`option${newIndex}`).style = "font-weight: 500;";
  filterIndex = newIndex;
}

function filterItems(sortedShop) {
  sortedShop.forEach((item) => {
    const gridItem = makeGridItem(item);
    items = items + "\n" + gridItem;
    itemsDiv.innerHTML = items;
  });

  noResults.innerHTML = `Showing ${sortedShop.length} results`;
}

function makeGridItem(item) {
  const link = `/shop/${item.id}.html`;
  const gridItem = `
  <a href=${link} class="grid-item" id=${item.id}>
    <img class="item-img" src=${item.img} alt=${item.name} />
    <div class="item-details">
      <span class="item-name">${item.name}</span>
      <span class="item-price"> &#8377; ${item.price}</span>
      <span class="item-stock">${item.stock}</span>
    </div>
  </a>
  `;

  return gridItem;
}

function showItems() {
  sort = sortElement.selectedOptions[0].value;

  if (sort === "Popularity") {
    items = "";
    const sortedShop = newShop.sort((a, b) => {
      return a.id - b.id;
    });

    filterItems(sortedShop);
  }

  if (sort === "Price: Asscending") {
    items = "";
    const sortedShop = newShop.sort((a, b) => {
      return a.price - b.price;
    });

    filterItems(sortedShop);
  }

  if (sort === "Price: Descending") {
    items = "";
    const sortedShop = newShop.sort((a, b) => {
      return b.price - a.price;
    });

    filterItems(sortedShop);
  }
}

sortElement.onchange = () => {
  showItems();
};

priceBtn.onclick = (e) => {
  e.preventDefault();

  const minPrice = parseInt(document.getElementById("min-price").value, 10);
  const maxPrice = parseInt(document.getElementById("max-price").value, 10);

  if (!isNaN(minPrice)) {
    const tempShop = newShop.filter((item) => {
      if (item.price >= minPrice) {
        return item;
      }
    });
    newShop = tempShop;
  }

  if (!isNaN(maxPrice)) {
    const tempShop = newShop.filter((item) => {
      if (item.price <= maxPrice) {
        return item;
      }
    });
    newShop = tempShop;
  }
  showItems();
};

// On Page Load
onload = () => {
  // On Page Load Show Filter By Popularity - Shop
  filterItems(newShop);
  changeFilter(1, 1);
};

var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function () {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight) {
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}

console.log(JSON.parse(localStorage.getItem("cart")));

// localStorage.clear();
